{"version":3,"file":"index-BGDxoJXD.js","sources":["../../data/config/index.ts","../../message/message.ts","../../message/message.vue","../../data/singData/getSong.ts","../../utils/getTimestamp.ts","../../data/singData/index.ts","../../data/processReqSing.ts","../../data/blive/reqUserList.ts","../../data/blive/index.ts","../../data/ticker.ts","../../views/singList/singList.ts","../../views/singList/singList.vue","../../views/config/config.ts","../../views/components/switch-button.vue","../../views/config/config.vue","../../index.ts"],"sourcesContent":["import type { CSSProperties } from \"vue\";\r\nimport { reactive } from \"vue\";\r\nimport type { Config, StylesKey, ConfigExtraStyle, IsTextStyle } from \"./types\";\r\n\r\n// 待优化\r\nconst originalConfig: Config = {\r\n  customFont: \"Microsoft YaHei UI Light\",\r\n  styles: {\r\n    box: {\r\n      width: \"300px\",\r\n      height: \"350px\",\r\n      backgroundColor: \"rgba(0, 15, 196, 0.4)\"\r\n    },\r\n    li: {\r\n      padding: \"0px 0px 0px 0px\",\r\n    },\r\n    index: {\r\n      minWidth: \"18px\",\r\n      color: \"gold\",\r\n      fontSize: \"15px\",\r\n      fontWeight: \"bold\"\r\n    },\r\n    indexShadow: {\r\n      textShadow: \"0 0 3px red,0 0 3px red\",\r\n    },\r\n    song: {\r\n      color: \"white\",\r\n      fontSize: \"17px\",\r\n      fontWeight: \"bold\",\r\n      margin: \"0px 0px 0px 0px\"\r\n    },\r\n    songShadow: {\r\n      textShadow: \"0 0 3px red,0 0 3px red\",\r\n    },\r\n    user: {\r\n      color: \"gold\",\r\n      fontSize: \"15px\",\r\n      fontWeight: \"bold\",\r\n      margin: \"0px 0px 0px 0px\"\r\n    },\r\n    userShadow: {\r\n      textShadow: \"0 0 3px red,0 0 3px red\",\r\n    }\r\n  },\r\n  is: {\r\n    customFont: false,\r\n    copyAtrist: false,\r\n    needBadge: false,\r\n    guardNeedBadge: false,\r\n    showBadgLevel: false,\r\n    showSingList: true,\r\n    showSingEdList: false,\r\n  },\r\n  isTextStyle: {\r\n    index: {\r\n      shadow: false,\r\n      stroke: false\r\n    },\r\n    song: {\r\n      shadow: false,\r\n      stroke: false\r\n    },\r\n    user: {\r\n      shadow: false,\r\n      stroke: false\r\n    }\r\n  },\r\n  value: {\r\n    reqInterval: 10,\r\n    maxReqCount: 9999,\r\n    maxListLength: 50\r\n  }\r\n};\r\nexport const configExtraStyle: Record<StylesKey, ConfigExtraStyle> = {\r\n  index: {\r\n    shadowBlur: \"3\",\r\n    shadowColor: \"red\",\r\n    strokeSize: \"2\",\r\n    strokeColor: \"red\",\r\n  },\r\n  song: {\r\n    shadowBlur: \"3\",\r\n    shadowColor: \"red\",\r\n    strokeSize: \"2\",\r\n    strokeColor: \"red\",\r\n  },\r\n  user: {\r\n    shadowBlur: \"3\",\r\n    shadowColor: \"red\",\r\n    strokeSize: \"2\",\r\n    strokeColor: \"red\",\r\n  }\r\n};\r\nexport const config = reactive<Config>(Object.assign({}, originalConfig));\r\n\r\nexport const updateConfig = {\r\n  is(key: keyof Config[\"is\"], enabled: boolean) {\r\n    config.is[key] = enabled;\r\n  },\r\n  isTextStyle(key: StylesKey, attr: keyof IsTextStyle, enabled: boolean) {\r\n    config.isTextStyle[key][attr] = enabled;\r\n  },\r\n  style(key: keyof Config[\"styles\"], attr: keyof CSSProperties, value: any) {\r\n    config.styles[key][attr as any] = value;\r\n  },\r\n  textExtraStyle(key: StylesKey, attr: \"shadow\" | \"stroke\") {\r\n    const style = configExtraStyle[key];\r\n    if (attr === \"shadow\") {\r\n      const shadow = new Array(2).fill(`0 0 ${style.shadowBlur}px ${style.shadowColor}`).join(\",\");\r\n      config.styles[`${key}Shadow`].textShadow = shadow;\r\n    } else {\r\n      const stroke = `${style.strokeSize}px ${style.strokeColor}`;\r\n      document.documentElement.style.setProperty(`--stroke-${key}`, stroke);\r\n    }\r\n  },\r\n  value(key: keyof Config[\"value\"], value: string) {\r\n    config.value[key] = +value;\r\n\r\n  },\r\n  customFont(font: string) {\r\n    config.customFont = font;\r\n  }\r\n};\r\n\r\n; (() => {\r\n  const singListConfig = localStorage.getItem(\"singListConfig\");\r\n  if (singListConfig) {\r\n    const CONFIG = JSON.parse(singListConfig);\r\n    Object.assign(configExtraStyle, CONFIG.configExtraStyle);\r\n    Object.assign(config, CONFIG.config);\r\n    (<StylesKey[]>Object.keys(configExtraStyle)).forEach((p) => {\r\n      updateConfig.textExtraStyle(p, \"stroke\");\r\n    });\r\n  }\r\n})();\r\n\r\nexport const saveConfig = () => {\r\n  localStorage.setItem(\"singListConfig\", JSON.stringify({\r\n    config: config,\r\n    configExtraStyle: configExtraStyle,\r\n  }));\r\n};","import { ref } from \"vue\";\r\n\r\ntype Message = { type: \"success\" | \"info\" | \"error\"; value: string; duration?: number; };\r\n\r\nconst message = () => {\r\n  const messageList = ref<Message[]>([]);\r\n  const add = (value: Message) => {\r\n    // const existIndex = messageList.value.findIndex(p => p === value);\r\n    // if (existIndex !== -1) {\r\n    //   messageList.value.splice(existIndex, 1);\r\n    // }\r\n    // if (messageList.value.length > 3) {\r\n    //   messageList.value.pop();\r\n    // }\r\n    // messageList.value.unshift(value);\r\n    if (messageList.value[0]) {\r\n      messageList.value[0] = value;\r\n    } else {\r\n      messageList.value.push(value);\r\n    }\r\n    remove(value.duration || 2000);\r\n  };\r\n\r\n  const remove = (() => {\r\n    let timeout = 0;\r\n    return (duration: number) => {\r\n      timeout && clearTimeout(timeout);\r\n      timeout = setTimeout(() => {\r\n        messageList.value.pop();\r\n        // if (messageList.value.length) {\r\n        //   remove();\r\n        // }\r\n      }, duration);\r\n    };\r\n  })();\r\n  return { messageList, add };\r\n};\r\n\r\nexport default message();","<template>\r\n  <main id=\"main\">\r\n    <TransitionGroup name=\"message\" tag=\"ul\">\r\n      <li v-for=\"item of messageList\" :key=\"item.value\" class=\"main-message\" :class=\"`message-${item.type}`\">\r\n        <div>{{ item.value }}</div>\r\n      </li>\r\n    </TransitionGroup>\r\n  </main>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport message from './message';\r\nconst { messageList } = message;\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"./message.scss\";\r\n</style>","import type { Sing } from \"./types\";\r\n\r\ntype Song = MusicListData[\"list\"][0];\r\n\r\nexport const getSong = (index: number) => {\r\n  return musicListData.list[index];\r\n};\r\nexport const getRandomSong = () => {\r\n  const musicList = musicListData.list.reduce((result: Record<string, Song[]>, value) => {\r\n    (result[value.category] ??= []).push(value);\r\n    return result;\r\n  }, {});\r\n\r\n  const allList = musicListData.list;\r\n\r\n  const remove = (list: Song[], song: Song) => {\r\n    if (!list) return;\r\n    list.splice(list.findIndex(p => p.atrist === song.atrist && p.name === song.name), 1);\r\n\r\n  };\r\n  const get = (sing: Sing): Song | string => {\r\n    const category = sing.name.slice(4);\r\n    if (musicList[category] && !musicList[category].length) {\r\n      return \"该类别已无歌曲可随机\";\r\n    }\r\n\r\n    if (!allList.length) {\r\n      return \"已无歌曲可随机\";\r\n    }\r\n\r\n    const randomIndex = Math.floor(Math.random() * (musicList[category] || allList).length);\r\n    const song = (musicList[category] || allList)[randomIndex];\r\n    remove(musicList[category], song);\r\n    remove(allList, song);\r\n\r\n    return song;\r\n  };\r\n\r\n  return get;\r\n};","export const getCurrentTimestamp = () => {\r\n  return Math.floor(new Date().getTime() / 1000);\r\n};","import { ref } from \"vue\";\r\nimport type { Sing } from \"./types\";\r\nimport { message } from \"@/message\";\r\nimport { config } from \"../config\";\r\nimport { getRandomSong } from \"./getSong\";\r\nimport { getCurrentTimestamp } from \"@/utils/getTimestamp\";\r\n\r\nconst GetRandomSong = getRandomSong();\r\nexport const singedList = ref<Sing[]>([]);\r\nexport const singList = ref<Sing[]>([]);\r\n\r\nconst isExistSing = (list: Sing[], waitSing: Sing) => {\r\n  return list.find(p => p.name === waitSing.name && p.atrist === waitSing.atrist);\r\n};\r\n\r\nexport const updateSing = (() => {\r\n  const addFakeSing = () => {\r\n    singList.value.push({\r\n      name: \"随机一首流行\",\r\n      atrist: \"\",\r\n      reqUser: {\r\n        uid: 1,\r\n        name: \"rhythm\",\r\n      },\r\n      isRandom: true,\r\n      reqTime: new Date().toLocaleTimeString(),\r\n      reqTimestamp: new Date().getTime()\r\n    });\r\n    setTimeout(() => {\r\n      singList.value.push({\r\n        name: \"随机一首粤语\",\r\n        atrist: \"\",\r\n        reqUser: {\r\n          uid: 1,\r\n          name: \"_随机\",\r\n        },\r\n        isRandom: true,\r\n        reqTime: new Date().toLocaleTimeString(),\r\n        reqTimestamp: new Date().getTime()\r\n      });\r\n    }, 200);\r\n  };\r\n\r\n  const remove = (reqTimestamp: number) => {\r\n    const index = singList.value.findIndex(p => p.reqTimestamp === reqTimestamp);\r\n    singedList.value.push(singList.value[index]);\r\n    singList.value.splice(index, 1);\r\n  };\r\n\r\n  const removeSinged = (reqTimestamp: number) => {\r\n    const index = singedList.value.findIndex(p => p.reqTimestamp === reqTimestamp);\r\n    singedList.value.splice(index, 1);\r\n  };\r\n\r\n  const randomSing = (sing: Sing) => {\r\n    const value = GetRandomSong(sing);\r\n    if (typeof value === \"string\") {\r\n      message.add({ type: \"error\", value, duration: 2500 });\r\n      sing.isRandom = false;\r\n      return;\r\n    }\r\n    sing.name = value.name;\r\n    sing.atrist = value.atrist;\r\n    sing.isRandom = false;\r\n  };\r\n\r\n  const currentPlay = (sing: Sing, index: number) => {\r\n    if (sing.currentPlay) {\r\n      sing.currentPlay = false;\r\n      return;\r\n    }\r\n    singList.value.forEach((p, i) => { p.currentPlay = index === i; });\r\n  };\r\n\r\n  const addSing = (waitSing: Sing) => {\r\n    const { reqUser: { name } } = waitSing;\r\n    const isSing = isExistSing(singList.value, waitSing);\r\n    if (isSing) {\r\n      message.add({ type: \"info\", value: `${name}\\n该曲已在列表当中` });\r\n      return;\r\n    }\r\n    const isSinged = isExistSing(singedList.value, waitSing);\r\n    if (isSinged) {\r\n      message.add({ type: \"info\", value: `${name}\\n该曲已在 ${isSinged.reqTime} 被点过` });\r\n      return;\r\n    }\r\n    if (waitSing.name.includes(\"随机一首\")) waitSing.isRandom = true;\r\n    singList.value.push(waitSing);\r\n    message.add({ type: \"success\", value: `${name}\\n点歌成功\\n${waitSing.name}${waitSing.atrist ? \" - \" + waitSing.atrist : \"\"}` });\r\n  };\r\n\r\n  const ordinaryAddSing = (waitSing: Sing) => {\r\n    const { reqUser: { name, uid, badgeSource, guard_level } } = waitSing;\r\n    if (uid !== userInfo.roomId && !userInfo.verifyExcludeId.includes(uid) && ((config.is.needBadge && !guard_level && !badgeSource?.is_same_room) || (config.is.guardNeedBadge && guard_level && !badgeSource?.is_same_room))) {\r\n      message.add({ type: \"error\", value: `${name}\\n需要携带粉丝牌点歌`, duration: 2500 });\r\n      return;\r\n    }\r\n    if (singList.value.length >= Math.max(10, config.value.maxListLength)) {\r\n      message.add({ type: \"info\", value: `${name}\\n列表已达上限(max ${Math.max(10, config.value.maxListLength)})` });\r\n      return;\r\n    }\r\n    addSing(waitSing);\r\n  };\r\n\r\n  return { ordinaryAddSing, addSing, addFakeSing, remove, removeSinged, randomSing, currentPlay };\r\n})();\r\n\r\n; (() => {\r\n  const listData = localStorage.getItem(\"singList\");\r\n  if (listData) {\r\n    const list = JSON.parse(listData);\r\n    const timestamp = getCurrentTimestamp();\r\n    if (timestamp - list.timestamp < 600) {\r\n      singList.value = list.singList || [];\r\n      singedList.value = list.singedList || [];\r\n    }\r\n  }\r\n  document.addEventListener(\"visibilitychange\", () => {\r\n    saveSingList();\r\n  });\r\n})();\r\n\r\nexport const saveSingList = () => {\r\n  const timestamp = getCurrentTimestamp();\r\n  localStorage.setItem(\"singList\", JSON.stringify({\r\n    singList: singList.value,\r\n    singedList: singedList.value,\r\n    timestamp\r\n  }));\r\n};","import type { DanmuMsg, SuperChatMsg } from \"blive-message-listener\";\r\nimport type { Sing } from \"./singData/types\";\r\nimport { getSong } from \"./singData/getSong\";\r\n\r\nexport const processReqSing = (msg: DanmuMsg | SuperChatMsg) => {\r\n  const { content, user } = msg;\r\n  const { badge, identity } = user;\r\n  let [mName, mAtrist] = content.split(\"点歌\")[1].trim().split(\" - \");\r\n\r\n  if (!mName) return;\r\n  if (content.includes(\"index_\")) {\r\n    const song = getSong(+content.split(\"_\")[1]);\r\n    if (!song) return;\r\n    mName = song.name;\r\n    mAtrist = song.atrist;\r\n  }\r\n\r\n  const sing: Sing = {\r\n    name: mName,\r\n    atrist: mAtrist,\r\n    reqUser: {\r\n      uid: user.uid,\r\n      name: user.uname,\r\n      guard_level: identity?.guard_level,\r\n      badgeSource: badge ? {\r\n        name: badge.name,\r\n        level: badge.level,\r\n        color: badge.color,\r\n        uname: badge.anchor.uname,\r\n        is_same_room: badge.anchor.is_same_room!\r\n      } : undefined\r\n    },\r\n    reqTime: new Date().toLocaleTimeString(),\r\n    reqTimestamp: new Date().getTime()\r\n  };\r\n\r\n  return sing;\r\n};","import { getCurrentTimestamp } from \"@/utils/getTimestamp\";\r\n\r\ntype ReqUserList = {\r\n  timestamp: number,\r\n  reqCount: number;\r\n};\r\n\r\nexport let reqUserList: Record<string, ReqUserList> = {};\r\n\r\n; (() => {\r\n  const reqUserData = localStorage.getItem(\"reqUserList\");\r\n  if (reqUserData) {\r\n    const list = JSON.parse(reqUserData);\r\n    const timestamp = getCurrentTimestamp();\r\n    if (timestamp - list.timestamp < 600) {\r\n      reqUserList = list.reqUserList;\r\n    }\r\n  }\r\n})();\r\n\r\nexport const saveUserList = () => {\r\n  const timestamp = getCurrentTimestamp();\r\n  localStorage.setItem(\"reqUserList\", JSON.stringify({\r\n    reqUserList,\r\n    timestamp\r\n  }));\r\n};","import type { DanmuMsg, MsgHandler } from 'blive-message-listener';\r\nimport { startListen } from 'blive-message-listener/browser';\r\nimport { processReqSing } from '../processReqSing';\r\nimport { config, updateSing } from '..';\r\nimport { reqUserList } from './reqUserList';\r\nimport { message } from '@/message';\r\n\r\nconst req = (body: DanmuMsg) => {\r\n  const time = config.value.reqInterval;\r\n  const currentTime = new Date().getTime();\r\n\r\n  const userName = body.user.uname;\r\n  if ((reqUserList[userName] ??= { timestamp: 0, reqCount: 0 }).reqCount++ > Math.max(1, config.value.maxReqCount)) {\r\n    message.add({ type: \"error\", value: `${userName}\\n已达到点歌上限(${Math.max(1, config.value.maxReqCount)})` });\r\n    return;\r\n  };\r\n\r\n  if ((currentTime - reqUserList[userName].timestamp) > time * 1000) {\r\n    reqUserList[userName].timestamp = currentTime;\r\n    const sing = processReqSing(body);\r\n    sing && updateSing.ordinaryAddSing(sing);\r\n  } else {\r\n    message.add({ type: \"info\", value: `${userName}\\n${time}秒内只能点一次` });\r\n  };\r\n};\r\n\r\nexport const handler: MsgHandler = {\r\n  onIncomeDanmu: (msg) => {\r\n    console.log(msg);\r\n\r\n    if (msg.body.content.startsWith(\"点歌\")) {\r\n      req(msg.body);\r\n    }\r\n  },\r\n  onIncomeSuperChat: (msg) => {\r\n    if (msg.body.content.startsWith(\"点歌\")) {\r\n      const sing = processReqSing(msg.body);\r\n      sing && updateSing.addSing(sing);\r\n    }\r\n  },\r\n  // onStartListen() {\r\n  //   console.log(\"start\");\r\n  // }\r\n};\r\nexport const bliveListener = startListen(userInfo.roomId, handler, {\r\n  ws: {\r\n    \"uid\": 318013512,\r\n    \"roomid\": 32218276,\r\n    \"protover\": 3,\r\n    \"buvid\": \"691C139C-B42B-1061-9CB4-1CEB28EDAC2773498infoc\",\r\n    \"platform\": \"web\",\r\n    \"type\": 2,\r\n    \"key\": \"KyimuEWa0MlNY7Qq0nkPR6ntTEy9R2dL4-y7QiTjX6Z2xAiuW4bMdkWlMHcHOJZ7RcGE3ue9dtd9Wmf-5YG-vWe1_C0GO_kdEVbIBEfB0F6jDy4EL0iffzY4_7H1kmtpkd2wFvVh-hYWqAuVv_6o-RrUwdBRfSruQRU67vLlBX9JxiDEAv-BUtE=\"\r\n  }\r\n});","type Callback = () => void;\r\n\r\nexport class Ticker {\r\n  private callbackList: Set<Callback> = new Set();\r\n  private isOpen = false;\r\n  private handleId = -1;\r\n\r\n  start() {\r\n    if (this.isOpen) return;\r\n    this.isOpen = true;\r\n    this.animationFn(25);\r\n    return this;\r\n  }\r\n\r\n  stop() {\r\n    if (this.isOpen) {\r\n      cancelAnimationFrame(this.handleId);\r\n      this.isOpen = false;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  add(fun: (remove: () => void) => void) {\r\n    const { callbackList } = this;\r\n    const remove = () => {\r\n      callbackList.delete(callback);\r\n    };\r\n    const callback = () => {\r\n      fun(remove);\r\n    };\r\n    callbackList.add(callback);\r\n    \r\n    return remove;\r\n  }\r\n\r\n  destroy() {\r\n    this.stop();\r\n    this.callbackList.clear();\r\n    return this;\r\n  }\r\n\r\n  private animationFn = (() => {\r\n    let oldTimestamp = 0;\r\n    const fpsInterval = 1000 / 40;\r\n    const { callbackList } = this;\r\n    const animationFn = (timestamp: number) => {\r\n      const elapsed = timestamp - oldTimestamp;\r\n\r\n      if (elapsed > fpsInterval) {\r\n        callbackList.forEach(p => p());\r\n        oldTimestamp = timestamp - (elapsed % fpsInterval);\r\n      }\r\n      this.handleId = requestAnimationFrame(animationFn);\r\n    };\r\n\r\n    return animationFn;\r\n  })();\r\n}","import { Ticker } from \"@/data/ticker\";\r\nimport { CSSProperties } from \"vue\";\r\n\r\nconst ticker = new Ticker();\r\n\r\nexport const autoscroll = (dom: HTMLDivElement): void => {\r\n  let scrollDistance = () => dom.scrollWidth - dom.clientWidth;\r\n  let speedInterpolation = 1;\r\n  let isStop = false;\r\n  let value = 0;\r\n\r\n  ticker.add((remove) => {\r\n    value = scrollDistance();\r\n    if (isStop || !value) return;\r\n    dom.scrollLeft += speedInterpolation;\r\n\r\n    if (dom.scrollLeft >= value || dom.scrollLeft <= 0) {\r\n      // 如果元素已删除\r\n      if (!document.contains(dom)) {\r\n        remove();\r\n        return;\r\n      };\r\n      speedInterpolation = speedInterpolation === -1 ? 1 : -1;\r\n      isStop = true;\r\n      setTimeout(() => {\r\n        isStop = false;\r\n      }, 2000);\r\n      return;\r\n    }\r\n  });\r\n  ticker.start();\r\n};\r\n\r\nexport const copy = (name: string, atrist?: string) => {\r\n  let text = `${name}${atrist ? ` ${atrist}` : \"\"}`.trim();\r\n\r\n  navigator.clipboard.writeText(text).catch(() => {\r\n    const textarea = document.createElement(\"textarea\");\r\n    textarea.value = text;\r\n    document.body.appendChild(textarea);\r\n    textarea.select();\r\n    document.execCommand('copy');\r\n    document.body.removeChild(textarea);\r\n  });\r\n};\r\n\r\nexport const resize = (style: CSSProperties) => {\r\n  return (pointerDown: PointerEvent) => {\r\n    const { x: ex, y: ey } = pointerDown;\r\n    const width = +(<string>style.width).slice(0, -2);\r\n    const height = +(<string>style.height).slice(0, -2);\r\n\r\n    const pointermove = (e: PointerEvent) => {\r\n      const x = e.x - ex;\r\n      const y = e.y - ey;\r\n      style.width = `${width + x}px`;\r\n      style.height = `${height + y}px`;\r\n    };\r\n\r\n    document.onpointermove = pointermove;\r\n    document.onpointerup = () => {\r\n      document.onpointermove = null;\r\n      document.onpointerup = null;\r\n    };\r\n  };\r\n};\r\n\r\nexport const dragSort = (pointerDown: PointerEvent) => {\r\n  if ([\"svg\", \"path\"].includes((<HTMLLIElement>pointerDown.target).tagName)) return;\r\n\r\n  const dom = <HTMLLIElement>pointerDown.currentTarget;\r\n  const parentNode = <HTMLOListElement>dom.parentNode!;\r\n  const DOMList = Array.from(parentNode.children) as HTMLLIElement[];\r\n  const index = DOMList.findIndex(p => p === dom);\r\n\r\n  const Y = pointerDown.y;\r\n  const height = dom.clientHeight;\r\n  const halfHeight = dom.clientHeight / 2;\r\n  const scrollDistance = parentNode.scrollHeight - parentNode.clientHeight;\r\n\r\n  let len = 0;\r\n  let y = Y;\r\n  let newY = 0;\r\n  let scrollTop = 0;\r\n  let scrollTimer = -1;\r\n\r\n  DOMList.forEach((item,) => item.style.pointerEvents = \"none\");\r\n  DOMList.splice(index, 1);\r\n  dom.style.transition = \"0s\";\r\n\r\n  const sortElementList = () => {\r\n    const translateY = scrollTop + newY;\r\n    dom.style.transform = `translateY(${translateY}px)`;\r\n    const abs = Math.abs(translateY);\r\n\r\n    len = Math.floor((abs + halfHeight) / height);\r\n    const [negative, start, end] = translateY > 0 ? [\"-\", index, index + len] : [\"\", index - len, index];\r\n    DOMList.forEach((item, i) => {\r\n      item.style.transform = `${(i >= start && i < end) ? `translateY(${negative}${height}px)` : \"\"}`;\r\n    });\r\n  };\r\n\r\n  const clearElementStyle = () => {\r\n    dom.style.transform = ``;\r\n    dom.style.pointerEvents = `auto`;\r\n    DOMList.forEach(p => {\r\n      p.style.transition = \"0s\";\r\n      p.style.transform = \"\";\r\n      p.style.pointerEvents = \"auto\";\r\n    });\r\n\r\n    dom.offsetHeight;\r\n    DOMList.forEach(p => {\r\n      p.style.transition = \"\";\r\n    });\r\n  };\r\n\r\n  if (scrollDistance) {\r\n    const containerRect = parentNode.getBoundingClientRect();\r\n    const [ScrollTopThreshold, ScrollBottomThreshold] = [containerRect.top + halfHeight, containerRect.bottom - halfHeight];\r\n\r\n    parentNode.onscroll = () => {\r\n      sortElementList();\r\n    };\r\n\r\n    const scrollTicker = () => {\r\n      scrollTimer = setTimeout(() => {\r\n        if (y < ScrollTopThreshold && parentNode.scrollTop > 0) {\r\n          parentNode.scrollTop -= 2;\r\n          scrollTop -= 2;\r\n        } else if (y > ScrollBottomThreshold && parentNode.scrollTop < scrollDistance) {\r\n          parentNode.scrollTop += 2;\r\n          scrollTop += 2;\r\n        }\r\n        scrollTicker();\r\n      }, 10);\r\n    };\r\n\r\n    scrollTicker();\r\n  }\r\n\r\n  const pointermove = (e: PointerEvent) => {\r\n    y = e.y;\r\n    newY = y - Y;\r\n    sortElementList();\r\n  };\r\n\r\n  const pointerup = () => {\r\n    clearTimeout(scrollTimer);\r\n    parentNode.onscroll = null;\r\n    dom.style.transition = ``;\r\n\r\n    if (!len) {\r\n      clearElementStyle();\r\n      return;\r\n    }\r\n\r\n    const isGt = scrollTop + newY > 0;\r\n    const childIndex = isGt ? Math.min(index + len, DOMList.length) : Math.max(index - len, 0);\r\n    const child = DOMList[childIndex];\r\n\r\n    const correctedLen = isGt ? childIndex - index : index - childIndex;\r\n\r\n    dom.style.transform = `translateY(${isGt ? \"\" : \"-\"}${correctedLen * height}px)`;\r\n    dom.style.pointerEvents = \"auto\";\r\n\r\n    setTimeout(() => {\r\n      clearElementStyle();\r\n      parentNode.insertBefore(dom, child);\r\n    }, 300);\r\n  };\r\n  document.onpointermove = pointermove;\r\n  document.onpointerup = () => {\r\n    pointerup();\r\n    document.onpointermove = null;\r\n    document.onpointerup = null;\r\n  };\r\n};","<template>\r\n  <section class=\"sing-list\" :style=\"{ fontFamily: is.customFont ? config.customFont : undefined }\">\r\n    <div class=\"list-box\" :style=\"styles.box\" v-if=\"config.is.showSingList\">\r\n      <TransitionGroup name=\"sing\" tag=\"ol\">\r\n        <li v-for=\"(item, index) of singList\" :ref=\"(el) => el && setAutoscroll(el as any)\"\r\n          :key=\"item.reqUser.name + item.reqTime\" :style=\"styles.li\" @pointerdown=\"dragSort($event)\">\r\n          <p :class=\"{ 'index-stroke': isTextStyle['index'].stroke }\" :style=\"getStyle('index')\"\r\n            :data-text=\"`${index + 1}.`\">\r\n            {{ index + 1 }}.\r\n          </p>\r\n          <p>\r\n          <div :class=\"{ 'song-stroke': isTextStyle['song'].stroke }\" :style=\"getStyle('song')\"\r\n            :data-text=\"item.name + `${item.atrist ? ' - ' + item.atrist : ''}`\">\r\n            <span>{{ item.name }}</span>\r\n            <template v-if=\"item.atrist\">\r\n              <span> - </span>\r\n              <span>{{ item.atrist }}</span>\r\n            </template>\r\n          </div>\r\n          <div>\r\n            <span v-if=\"item.currentPlay\" class=\"sing-mark\" :style=\"{ background: 'rgb(0 102 255)' }\">cur</span>\r\n            <span v-if=\"item.reqUser.superChat\" class=\"sing-mark\"\r\n              :style=\"{ background: item.reqUser.superChat.content_color }\">\r\n              SC {{ item.reqUser.superChat.price }}\r\n            </span>\r\n            <span v-if=\"is.showBadgLevel && item.reqUser.badgeSource?.level\" class=\"sing-mark\"\r\n              :style=\"{ background: item.reqUser.badgeSource.color }\">\r\n              {{ item.reqUser.badgeSource.level }}\r\n            </span>\r\n            <span :class=\"{ 'user-stroke': isTextStyle['user'].stroke }\" :data-text=\"item.reqUser.name\"\r\n              :style=\"getStyle('user')\">\r\n              {{ item.reqUser.name }}\r\n            </span>\r\n          </div>\r\n          </p>\r\n          <article class=\"icon\">\r\n            <svg @click=\"updateSing.remove(item.reqTimestamp)\" t=\"1709147244672\" viewBox=\"0 0 1024 1024\" version=\"1.1\"\r\n              xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1489\" width=\"32\" height=\"32\">\r\n              <path\r\n                d=\"M831.632761 244.00634 765.925247 178.299849 503.095189 441.128883 240.265132 178.299849 174.558641 244.00634 437.387675 506.836397 174.558641 769.666454 240.265132 835.373968 503.095189 572.543911 765.925247 835.373968 831.632761 769.666454 568.802704 506.836397Z\"\r\n                p-id=\"1490\" data-spm-anchor-id=\"a313x.search_index.0.i0.10e63a81Ccff3n\" class=\"selected\">\r\n              </path>\r\n            </svg>\r\n            <svg @click=\"copy(item.name, config.is.copyAtrist ? item.atrist : '')\" t=\"1709124944739\"\r\n              viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"8200\" width=\"32\"\r\n              height=\"32\">\r\n              <path\r\n                d=\"M679.827 780.524h-402.786v-469.916h402.786v469.916zM646.261 344.173h-335.655v402.786h335.655v-402.786zM411.304 243.476h-33.564v67.131h33.564v-67.131zM579.131 444.869h-201.394v33.564h201.394v-33.564zM579.131 545.564h-201.394v33.564h201.394v-33.564zM579.131 646.261h-201.394v33.564h201.394v-33.564zM746.959 243.476h-335.655v33.564h335.655v-33.564zM746.959 277.041h-33.564v402.786h33.564v-402.786zM713.394 646.261h-33.564v33.564h33.564v-33.564z\"\r\n                p-id=\"8201\"></path>\r\n            </svg>\r\n            <svg v-if=\"item.isRandom\" @click=\"updateSing.randomSing(item)\" t=\"1709175592007\" viewBox=\"0 0 1024 1024\"\r\n              version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"10345\" width=\"32\" height=\"32\">\r\n              <path\r\n                d=\"M956.915826 484.47273l-105.340577 106.496578c-8.706131 8.344881-22.758767 8.344881-31.392648 0l-104.690327-106.496578c-12.354759-14.594511-4.082128-19.760389 4.551753-28.213646h95.911946c-26.515769-143.59698-152.194736-252.47781-303.522473-252.47781-117.081211 0-218.84541 65.025048-271.262823 160.936993l-52.309039-20.91639c60.94292-116.539335 182.828759-196.158894 323.571862-196.158894 182.467509 0 333.144994 133.879348 360.202639 308.616101h79.800184c8.597756 8.453256 13.113385 19.83264 4.479503 28.213646z m-751.1838-22.614267l105.340577 106.388203c8.706131 8.453256 4.190503 19.83264-4.551753 28.285896H215.341283c36.666902 129.43597 155.698864 224.372539 297.056092 224.372539 107.544204 0 202.191773-54.98229 257.463064-138.358851l52.850914 21.097015c-64.302547 103.895576-179.071756 173.400127-310.313978 173.400127-172.605376 0-316.527482-119.826713-354.531009-280.51083H74.164679c-8.633881-8.453256-16.906512-13.691385-4.443378-28.285896l104.618077-106.388203c8.633881-8.453256 22.686517-8.453256 31.392648 0z\"\r\n                p-id=\"10346\"></path>\r\n            </svg>\r\n            <svg @click=\"updateSing.currentPlay(item, index)\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\"\r\n              width=\"32\" height=\"32\" viewBox=\"0 0 24 24\">\r\n              <path\r\n                d=\"M 11 3 L 11 14.560547 C 10.40837 14.213643 9.7306745 14 9 14 C 6.8027056 14 5 15.802706 5 18 C 5 20.197294 6.8027056 22 9 22 C 11.197294 22 13 20.197294 13 18 L 13 9 L 19 9 L 19 3 L 11 3 z M 13 5 L 17 5 L 17 7 L 13 7 L 13 5 z M 9 16 C 10.116414 16 11 16.883586 11 18 C 11 19.116414 10.116414 20 9 20 C 7.8835859 20 7 19.116414 7 18 C 7 16.883586 7.8835859 16 9 16 z\">\r\n              </path>\r\n            </svg>\r\n          </article>\r\n        </li>\r\n      </TransitionGroup>\r\n      <VMessage></VMessage>\r\n      <div class=\"tip\" v-if=\"!singList[0]\">\r\n        <p>点歌格式:</p>\r\n        <p>点歌<span> </span><span>[歌名]</span><span> - </span><span>[歌手]</span></p>\r\n        <p>or</p>\r\n        <p>点歌<span> </span>随机一首<span>[类别]</span></p>\r\n      </div>\r\n      <div class=\"resize\" @pointerdown=\"updateResize\"></div>\r\n    </div>\r\n    <!-- singedList -->\r\n    <div class=\"list-box\" :style=\"styles.box\" v-if=\"config.is.showSingEdList\">\r\n      <TransitionGroup name=\"sing\" tag=\"ol\">\r\n        <li v-for=\"(item, index) of singedList\" :ref=\"(el) => el && setAutoscroll(el as any)\"\r\n          :key=\"item.reqUser.name + item.reqTime\" :style=\"styles.li\" @pointerdown=\"dragSort($event)\">\r\n          <p :class=\"{ 'index-stroke': isTextStyle['index'].stroke }\" :style=\"getStyle('index')\"\r\n            :data-text=\"`${index + 1}.`\">\r\n            {{ index + 1 }}.\r\n          </p>\r\n          <p>\r\n          <div :class=\"{ 'song-stroke': isTextStyle['song'].stroke }\" :style=\"getStyle('song')\"\r\n            :data-text=\"item.name + `${item.atrist ? ' - ' + item.atrist : ''}`\">\r\n            <span>{{ item.name }}</span>\r\n\r\n            <template v-if=\"item.atrist\">\r\n              <span> - </span>\r\n              <span>{{ item.atrist }}</span>\r\n            </template>\r\n          </div>\r\n          <div>\r\n            <span v-if=\"item.reqUser.superChat\" class=\"sing-mark\"\r\n              :style=\"{ background: item.reqUser.superChat.content_color }\">\r\n              SC {{ item.reqUser.superChat.price }}\r\n            </span>\r\n            <span v-if=\"item.reqUser.badgeSource?.level\" class=\"sing-mark\"\r\n              :style=\"{ background: item.reqUser.badgeSource.color }\">\r\n              {{ item.reqUser.badgeSource.level }}\r\n            </span>\r\n            <span :class=\"{ 'user-stroke': isTextStyle['user'].stroke }\" :data-text=\"item.reqUser.name\"\r\n              :style=\"getStyle('user')\">\r\n              {{ item.reqUser.name }}\r\n            </span>\r\n          </div>\r\n          </p>\r\n          <article class=\"icon\">\r\n            <svg @click=\"updateSing.removeSinged(item.reqTimestamp)\" t=\"1709147244672\" viewBox=\"0 0 1024 1024\"\r\n              version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1489\" width=\"32\" height=\"32\">\r\n              <path\r\n                d=\"M831.632761 244.00634 765.925247 178.299849 503.095189 441.128883 240.265132 178.299849 174.558641 244.00634 437.387675 506.836397 174.558641 769.666454 240.265132 835.373968 503.095189 572.543911 765.925247 835.373968 831.632761 769.666454 568.802704 506.836397Z\"\r\n                p-id=\"1490\" data-spm-anchor-id=\"a313x.search_index.0.i0.10e63a81Ccff3n\" class=\"selected\">\r\n              </path>\r\n            </svg>\r\n            <svg @click=\"copy(item.name, config.is.copyAtrist ? item.atrist : '')\" t=\"1709124944739\"\r\n              viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"8200\" width=\"32\"\r\n              height=\"32\">\r\n              <path\r\n                d=\"M679.827 780.524h-402.786v-469.916h402.786v469.916zM646.261 344.173h-335.655v402.786h335.655v-402.786zM411.304 243.476h-33.564v67.131h33.564v-67.131zM579.131 444.869h-201.394v33.564h201.394v-33.564zM579.131 545.564h-201.394v33.564h201.394v-33.564zM579.131 646.261h-201.394v33.564h201.394v-33.564zM746.959 243.476h-335.655v33.564h335.655v-33.564zM746.959 277.041h-33.564v402.786h33.564v-402.786zM713.394 646.261h-33.564v33.564h33.564v-33.564z\"\r\n                p-id=\"8201\"></path>\r\n            </svg>\r\n          </article>\r\n        </li>\r\n      </TransitionGroup>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { singList, singedList, updateSing, config } from \"@/data\";\r\nimport type { StylesKey } from \"@/data/config/types\";\r\nimport { autoscroll, copy, resize, dragSort } from \"./singList\";\r\nimport VMessage from \"@/message\";\r\n\r\nconst { styles, is, isTextStyle } = config;\r\n\r\nconst getStyle = (key: StylesKey) => {\r\n  const isTextStyleObj = isTextStyle[key];\r\n  const shadow = isTextStyleObj.shadow ? styles[`${key}Shadow`] : {};\r\n  // const stroke = isTextStyleObj.stroke ? styles[`${key}Stroke`] : {};\r\n  return Object.assign({}, styles[key], shadow);\r\n};\r\n\r\nconst updateResize = resize(config.styles.box);\r\nconst setAutoscroll = (DOM: HTMLLIElement) => {\r\n  setTimeout(() => {\r\n    for (const item of Object.values(DOM.children[1].children) as HTMLDivElement[]) {\r\n      if ((<any>item).isTimer) return;\r\n      (<any>item).isTimer = true;\r\n      autoscroll(item);\r\n    }\r\n  }, 100);\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"./singList.scss\";\r\n</style>","import { config, saveConfig, saveSingList, updateConfig } from '@/data';\r\nimport { saveUserList } from '@/data/blive/reqUserList';\r\nimport { StylesKey } from '@/data/config/types';\r\nimport Pickr from '@simonwep/pickr';\r\nimport { computed, ref } from 'vue';\r\n\r\nexport const createColorPicker = (dom: HTMLDivElement, defaultColor: string, callback: (value: string) => void) => {\r\n  if ((<any>dom).isPickr) return;\r\n  (<any>dom).isPickr = true;\r\n  const pickr = Pickr.create({\r\n    el: dom,\r\n    theme: \"monolith\",\r\n    default: defaultColor || \"#fff\",\r\n    useAsButton: true,\r\n    position: \"left-middle\",\r\n    swatches: [\r\n      'rgba(33, 150, 243, 0.75)',\r\n      'rgba(3, 169, 244, 0.7)',\r\n      'rgba(0, 188, 212, 0.7)',\r\n      'rgba(0, 150, 136, 0.75)',\r\n      'rgba(76, 175, 80, 0.8)',\r\n      'rgba(139, 195, 74, 0.85)',\r\n      'rgba(205, 220, 57, 0.9)',\r\n    ],\r\n    components: {\r\n      preview: true,\r\n      opacity: true,\r\n      hue: true,\r\n      interaction: {\r\n        save: true,\r\n        clear: true,\r\n        input: true\r\n      }\r\n    }\r\n  });\r\n  pickr.on(\"change\", (color: any) => {\r\n    const rgba = (<number[]>color.toRGBA()).reduce((result, value, index) => {\r\n      result += index < 3 ? `${Math.round(value)},` : `${value}`;\r\n      return result;\r\n    }, \"\");\r\n    callback(`rgba(${rgba})`);\r\n  });\r\n};\r\n\r\nexport const styleKeyList: StylesKey[] = [\"index\", \"song\", \"user\"];\r\nexport const curStyleKey = ref<StylesKey>(\"index\");\r\nexport const configStyleList = computed(() => {\r\n  const keyStyles = config.styles[curStyleKey.value];\r\n  return (<[any, string][]>Object.entries(keyStyles)).filter(p => !p[0].toLowerCase().includes(\"color\")).map(([key, value]) => {\r\n    return {\r\n      name: `${curStyleKey.value} ${configStyleTitle[key]}`,\r\n      value,\r\n      fn: (value: string) => {\r\n        updateConfig.style(curStyleKey.value, key, value);\r\n      }\r\n    };\r\n  });\r\n});\r\nexport const configValueTitle = [\"单个用户请求间隔(秒)\", \"单个用户最大请求数\", \"列表最大长度\"];\r\n\r\nexport const configStyleTitle: Record<string, string> = {\r\n  minWidth: \"最小宽度\",\r\n  color: \"字体颜色\",\r\n  fontSize: \"字体大小\",\r\n  fontWeight: \"字体粗细(normal|bold)\",\r\n  margin: \"外边距(上 左 下 右)\",\r\n\r\n};\r\n\r\nexport const saveList = [\r\n  {\r\n    title: \"用户列表\",\r\n    fun: saveUserList,\r\n  },\r\n  {\r\n    title: \"设置\",\r\n    fun: saveConfig,\r\n  },\r\n  {\r\n    title: \"点歌列表\",\r\n    fun: saveSingList\r\n  }\r\n];","<template>\r\n  <div>\r\n    <input type=\"checkbox\" :id=\"data.id\" :checked=\"data.checked\"\r\n      @change=\"$emit('switch', (<HTMLInputElement>$event.target).checked)\">\r\n    <label :for=\"data.id\"></label>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nconst data = defineProps<{\r\n  id: any;\r\n  checked: boolean;\r\n}>();\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\ndiv {\r\n  width: 4rem;\r\n  background-color: rgb(221, 221, 221);\r\n}\r\nlabel {\r\n  display: block;\r\n  width: 2rem;\r\n  height: 2rem;\r\n  position: relative;\r\n  &::before,\r\n  &::after {\r\n    position: absolute;\r\n    content: \"\";\r\n    width: 2rem;\r\n    height: 2rem;\r\n    left: 0;\r\n    background-color: rgb(182, 182, 182);\r\n    transition: .3s;\r\n  }\r\n  &::before {\r\n    z-index: 10;\r\n    cursor: pointer;\r\n  }\r\n}\r\ninput:checked ~ label {\r\n  &::after {\r\n    width: 4rem;\r\n    background-color: rgb(137, 240, 133);\r\n  }\r\n  &:before {\r\n    background-color: rgb(20, 221, 13);\r\n    left: 2rem;\r\n  }\r\n}\r\ninput {\r\n  display: none;\r\n}\r\n</style>","<template>\r\n  <input type=\"checkbox\" id=\"show-button\">\r\n  <label class=\"toggle-show-confog\" for=\"show-button\">sing dev</label>\r\n  <label class=\"mask\" for=\"show-button\"></label>\r\n  <div class=\"sing-list-config\">\r\n    <label class=\"toggle-show-confog1\" for=\"show-button\">\r\n      <svg t=\"1709147244672\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\r\n        p-id=\"1489\" width=\"32\" height=\"32\">\r\n        <path\r\n          d=\"M831.632761 244.00634 765.925247 178.299849 503.095189 441.128883 240.265132 178.299849 174.558641 244.00634 437.387675 506.836397 174.558641 769.666454 240.265132 835.373968 503.095189 572.543911 765.925247 835.373968 831.632761 769.666454 568.802704 506.836397Z\"\r\n          fill=\"\" p-id=\"1490\" data-spm-anchor-id=\"a313x.search_index.0.i0.10e63a81Ccff3n\" class=\"selected\">\r\n        </path>\r\n      </svg>\r\n    </label>\r\n    <h1>config</h1>\r\n    <ul>\r\n      <li>• 宽高修改位置在盒子右下角</li>\r\n      <li>• 元素可拖拽排序</li>\r\n      <li v-for=\"p of saveList\">\r\n        <div>{{ p.title }}</div>\r\n        <div class=\"button\" @click=\"p.fun\">保存</div>\r\n      </li>\r\n      <li>\r\n        <div>设置背景颜色</div>\r\n        <div class=\"color-picker\" :ref=\"el => el && createColorPicker(el as any,\r\n        styles.box.backgroundColor!, (value) => { updateConfig.style('box', 'backgroundColor', value); })\">\r\n        </div>\r\n      </li>\r\n\r\n      <li>\r\n        <div>添加俩条数据</div>\r\n        <div @click=\"updateSing.addFakeSing()\">push</div>\r\n      </li>\r\n      <li v-for=\"(p, key) in config.is\" :key=\"key\">\r\n        <div>is {{ key }}</div>\r\n        <switchButton :id=\"key\" :checked=\"p\" @switch=\"(value: boolean) => updateConfig.is(key, value)\"></switchButton>\r\n      </li>\r\n      <li v-for=\"(p, key, index) in config.value\" :key=\"key\">\r\n        <div>{{ configValueTitle[index] }}</div>\r\n        <input type=\"number\" :value=\"p\" @change=\"updateConfig.value(key, (<HTMLInputElement>$event.target).value)\">\r\n      </li>\r\n      <!-- 样式 -->\r\n      <li>\r\n        <h3>样式</h3>\r\n      </li>\r\n      <li>\r\n        <div>自定义字体</div>\r\n        <input type=\"text\" v-model=\"config.customFont\">\r\n      </li>\r\n      <li>\r\n        <div>元素内边距(上 左 下 右)</div>\r\n        <input type=\"text\" :value=\"styles.li.padding\"\r\n          @change=\"updateConfig.style('li', 'padding', (<HTMLInputElement>$event.target).value)\">\r\n      </li>\r\n      <li class=\"config-key\">\r\n        <p v-for=\"p of styleKeyList\" :class=\"{ cur: p === curStyleKey }\" @click=\"curStyleKey = p\">{{ p }}</p>\r\n      </li>\r\n      <li v-for=\"(p, key) in config.isTextStyle[curStyleKey]\" :key=\"key\">\r\n        <div>is {{ curStyleKey }} {{ key }}</div>\r\n        <switchButton :id=\"key\" :checked=\"p\"\r\n          @switch=\"(value: boolean) => updateConfig.isTextStyle(curStyleKey, key, value)\"></switchButton>\r\n      </li>\r\n      <li>\r\n        <div>{{ curStyleKey }} 字体颜色</div>\r\n        <div class=\"config-tip\"></div>\r\n        <div class=\"color-picker\" :ref=\"el => el && createColorPicker(el as any, styles[curStyleKey].color!,\r\n        (value) => { updateConfig.style(curStyleKey, 'color', value); })\">\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <div>{{ curStyleKey }} 字体阴影颜色</div>\r\n        <div class=\"config-tip\"></div>\r\n        <div class=\"color-picker\"\r\n          :ref=\"el => el && createColorPicker(el as any, configExtraStyle[curStyleKey].shadowColor,\r\n        (value) => { configExtraStyle[curStyleKey].shadowColor = value; updateConfig.textExtraStyle(curStyleKey, 'shadow'); })\">\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <div>{{ curStyleKey }} 字体阴影模糊距离</div>\r\n        <div class=\"config-tip\"></div>\r\n        <input type=\"number\" v-model=\"configExtraStyle[curStyleKey].shadowBlur\"\r\n          @change=\"updateConfig.textExtraStyle(curStyleKey, 'shadow')\">\r\n      </li>\r\n      <li>\r\n        <div>{{ curStyleKey }} 字体描边颜色</div>\r\n        <div class=\"config-tip\"></div>\r\n        <div class=\"color-picker\"\r\n          :ref=\"el => el && createColorPicker(el as any, configExtraStyle[curStyleKey].strokeColor,\r\n        (value) => { configExtraStyle[curStyleKey].strokeColor = value; updateConfig.textExtraStyle(curStyleKey, 'stroke'); })\">\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <div>{{ curStyleKey }} 字体描边大小</div>\r\n        <div class=\"config-tip\"></div>\r\n        <input type=\"number\" v-model=\"configExtraStyle[curStyleKey].strokeSize\"\r\n          @change=\"updateConfig.textExtraStyle(curStyleKey, 'stroke')\">\r\n      </li>\r\n      <li v-for=\"p of configStyleList\">\r\n        <div>{{ p.name }}</div>\r\n        <input type=\"text\" :value=\"p.value\" @change=\"p.fn((<HTMLInputElement>$event.target).value)\">\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { config, updateConfig, updateSing, configExtraStyle } from '@/data';\r\nimport { createColorPicker, configValueTitle, configStyleList, curStyleKey, styleKeyList, saveList } from './config';\r\nimport { switchButton } from '../components';\r\nconst { styles } = config;\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"./config.scss\";\r\n</style>","import { createApp } from \"vue\";\r\n\r\nimport app from \"./views/app.vue\";\r\n\r\nimport '@simonwep/pickr/dist/themes/monolith.min.css';\r\nimport \"./styles/index.css\";\r\nimport \"./styles/textStyle.css\";\r\n\r\ncreateApp(app).mount(\".app\");"],"names":["originalConfig","configExtraStyle","config","reactive","updateConfig","key","enabled","attr","value","style","shadow","stroke","font","singListConfig","CONFIG","p","saveConfig","message","messageList","ref","add","remove","timeout","duration","message$1","getSong","index","getRandomSong","musicList","result","_a","allList","list","song","sing","category","randomIndex","getCurrentTimestamp","GetRandomSong","singedList","singList","isExistSing","waitSing","updateSing","addFakeSing","reqTimestamp","removeSinged","randomSing","currentPlay","i","addSing","name","isSinged","uid","badgeSource","guard_level","listData","saveSingList","timestamp","processReqSing","msg","content","user","badge","identity","mName","mAtrist","reqUserList","reqUserData","saveUserList","req","body","time","currentTime","userName","handler","startListen","Ticker","__publicField","oldTimestamp","fpsInterval","callbackList","animationFn","elapsed","fun","callback","ticker","autoscroll","dom","scrollDistance","speedInterpolation","isStop","copy","atrist","text","textarea","resize","pointerDown","ex","ey","width","height","pointermove","e","x","y","dragSort","parentNode","DOMList","Y","halfHeight","len","newY","scrollTop","scrollTimer","item","sortElementList","translateY","abs","negative","start","end","clearElementStyle","containerRect","ScrollTopThreshold","ScrollBottomThreshold","scrollTicker","pointerup","isGt","childIndex","child","correctedLen","styles","is","isTextStyle","getStyle","updateResize","setAutoscroll","DOM","createColorPicker","defaultColor","Pickr","color","rgba","styleKeyList","curStyleKey","configStyleList","computed","keyStyles","configStyleTitle","configValueTitle","saveList","data","__props","createApp","app"],"mappings":"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"}